<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Currency Converter</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: grey;
            /* Light gray background */
        }

        .container {
            max-width: 42rem;
            background-color: aqua;
        }
    </style>
</head>

<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <div class="container mx-auto p-8 bg-transparent rounded-2xl shadow-xl border border-blue-400">
        <h1 class="text-4xl font-bold text-center mb-6 text-gray-800">Currency Converter</h1>

        <!-- Conversion Interface -->
        <div class="space-y-6">
            <!-- Amount Input -->
            <div>
                <label for="amount" class="block text-lg font-medium text-gray-700 mb-2">Amount</label>
                <input type="number" id="amount" value="1.00" min="0" step="0.01"
                    class="w-full p-4 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 text-lg transition duration-200">
            </div>

            <!-- Currency Selection -->
            <div class="flex flex-col md:flex-row items-center justify-between space-y-4 md:space-y-0 md:space-x-4">
                <!-- From Currency -->
                <div class="flex-1 w-full">
                    <label for="from-currency" class="block text-lg font-medium text-gray-700 mb-2">From</label>
                    <select id="from-currency"
                        class="w-full p-4 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 text-lg transition duration-200 cursor-pointer bg-white">
                    </select>
                </div>

                <!-- Swap Button -->
                <button id="swap-btn"
                    class="p-3 transition-transform duration-300 ease-in-out text-gray-500 hover:text-blue-600 active:scale-95 transform rotate-90 md:rotate-0">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                        stroke="currentColor" class="w-8 h-8">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M7.5 21L3 16.5m0 0L7.5 12M3 16.5h13.5m-6-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5" />
                    </svg>
                </button>

                <!-- To Currency -->
                <div class="flex-1 w-full">
                    <label for="to-currency" class="block text-lg font-medium text-gray-700 mb-2">To</label>
                    <select id="to-currency"
                        class="w-full p-4 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 text-lg transition duration-200 cursor-pointer bg-white">
                    </select>
                </div>
            </div>

            <!-- Conversion Result -->
            <div id="result-box" class="p-6 bg-gray-50 rounded-xl shadow-inner text-center hidden">
                <p class="text-3xl font-bold text-gray-800">
                    <span id="from-amount-display"></span> <span id="from-currency-display"></span> = <span
                        id="to-amount-display"></span> <span id="to-currency-display"></span>
                </p>
                <p id="rate-display" class="text-sm text-gray-500 mt-2"></p>
            </div>

            <!-- Message Area for status/errors -->
            <div id="message-area" class="text-center text-sm font-medium h-6"></div>

            <!-- Convert Button -->
            <div class="pt-4">
                <button id="convert-btn"
                    class="w-full py-4 bg-blue-600 text-white font-bold text-xl rounded-xl shadow-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-500 focus:ring-opacity-50 transition duration-300 transform active:scale-98">
                    Convert
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Get references to all HTML elements
            const amountInput = document.getElementById('amount');
            const fromCurrencySelect = document.getElementById('from-currency');
            const toCurrencySelect = document.getElementById('to-currency');
            const swapBtn = document.getElementById('swap-btn');
            const convertBtn = document.getElementById('convert-btn');
            const resultBox = document.getElementById('result-box');
            const fromAmountDisplay = document.getElementById('from-amount-display');
            const fromCurrencyDisplay = document.getElementById('from-currency-display');
            const toAmountDisplay = document.getElementById('to-amount-display');
            const toCurrencyDisplay = document.getElementById('to-currency-display');
            const rateDisplay = document.getElementById('rate-display');
            const messageArea = document.getElementById('message-area');

            // API URL for currency rates. Using a free, public API.
            const API_URL = 'https://open.er-api.com/v6/latest/USD';

            let exchangeRates = {};
            const currencyList = [
                "USD", "EUR", "GBP", "JPY", "CAD", "AUD", "CHF", "CNY", "HKD", "INR", "SGD", "NZD", "MXN", "BRL", "ZAR", "EGP", "THB", "KRW", "MYR", "IDR", "PHP", "VND", "RUB", "SAR", "AED"
            ];

            // Function to populate the currency dropdown menus
            function populateCurrencies() {
                currencyList.forEach(currency => {
                    const option1 = document.createElement('option');
                    option1.value = currency;
                    option1.textContent = currency;
                    fromCurrencySelect.appendChild(option1);

                    const option2 = document.createElement('option');
                    option2.value = currency;
                    option2.textContent = currency;
                    toCurrencySelect.appendChild(option2);
                });
                // Set default values
                fromCurrencySelect.value = 'USD';
                toCurrencySelect.value = 'EUR';
            }

            // Function to fetch exchange rates from the API
            async function fetchRates() {
                messageArea.textContent = "Fetching latest rates...";
                try {
                    const response = await fetch(API_URL);
                    if (!response.ok) {
                        throw new Error(`API Error: ${response.statusText}`);
                    }
                    const data = await response.json();
                    exchangeRates = data.rates;
                    messageArea.textContent = "";
                    convertCurrency(); // Perform initial conversion
                } catch (error) {
                    messageArea.textContent = "Error fetching rates. Please try again later.";
                    console.error("Error fetching rates:", error);
                }
            }

            // Function to perform the currency conversion
            function convertCurrency() {
                const amount = parseFloat(amountInput.value);
                const fromCurrency = fromCurrencySelect.value;
                const toCurrency = toCurrencySelect.value;

                if (isNaN(amount) || amount <= 0) {
                    resultBox.classList.add('hidden');
                    messageArea.textContent = "Please enter a valid amount.";
                    return;
                }

                if (Object.keys(exchangeRates).length === 0) {
                    messageArea.textContent = "Rates not available. Please wait or refresh.";
                    return;
                }

                let fromRate = exchangeRates[fromCurrency];
                let toRate = exchangeRates[toCurrency];

                if (!fromRate || !toRate) {
                    messageArea.textContent = "Selected currency not supported by the API.";
                    resultBox.classList.add('hidden');
                    return;
                }

                // Calculate the converted amount
                const convertedAmount = (amount / fromRate) * toRate;
                const rate = toRate / fromRate;

                // Display the result
                fromAmountDisplay.textContent = amount.toFixed(2);
                fromCurrencyDisplay.textContent = fromCurrency;
                toAmountDisplay.textContent = convertedAmount.toFixed(2);
                toCurrencyDisplay.textContent = toCurrency;
                rateDisplay.textContent = `1 ${fromCurrency} = ${rate.toFixed(4)} ${toCurrency}`;

                resultBox.classList.remove('hidden');
                messageArea.textContent = "";
            }

            // Event listeners
            convertBtn.addEventListener('click', convertCurrency);
            amountInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') {
                    convertCurrency();
                }
            });
            fromCurrencySelect.addEventListener('change', convertCurrency);
            toCurrencySelect.addEventListener('change', convertCurrency);

            swapBtn.addEventListener('click', () => {
                const temp = fromCurrencySelect.value;
                fromCurrencySelect.value = toCurrencySelect.value;
                toCurrencySelect.value = temp;
                convertCurrency();
            });

            // Initial setup
            populateCurrencies();
            fetchRates();
        });
    </script>
</body>

</html>